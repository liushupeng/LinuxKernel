# Linux内核轻松入坑

- [Linux 内核学习笔记](https://freeflyingsheep.github.io/zh-cn/posts/introduction/) $^{[1]}$ 
- [Linux内核应该怎么去学习](https://www.zhihu.com/question/58121772) $^{[2]}$ 
- [怎么搭建学习Linux内核的运行、调试环境](https://www.zhihu.com/question/66594120/answer/245555815) 

$[1]$ 原作者整理了《深入理解 Linux 内核》、《Linux 内核设计与实现》和《深入 Linux 内核架构》相关章节的内容以及作者个人的理解，里面的内容很有价值。本篇文章也参考了其中部分内容。

$[2]$ 按照这个答案提供的路线：[学习内核功夫在代码之外](https://www.zhihu.com/question/58121772/answer/428003091 ) 

# 学习路线

1️⃣首先要搭建一个Linux的学习环境：建议使用Qemu虚拟机+装一个标准的Ubuntu Linux，学习简单的Linux使用方法，更重要的是学习编译Linux内核 $^{[1]}$ ✅ 

2️⃣从《LINUX设备驱动程序》这本书入手，掌握编写标准的虚拟字符驱动方法，并亲自动写一个，验证通过 $^{[2]}$ ✅ 

3️⃣在基于2️⃣的代码里，对于open/write钩子调用backtrace函数输出驱动file_operations钩子函数的执行上下文，并根据backtrace调用栈，看每个函数长什么样，如果能分析到这些函数属于那个功能模块(比如syscall,vfs,device)就更好了 ✅ 

4️⃣再从通用的、基础的功能模块开始学起，比如系统调用原理，中断处理 ✅ 

5️⃣学习第4️⃣点任何知识时，建议找相关的参考书帮自己梳理知识脉络，更重的是动手修改代码验证自己的理解。比如新增一个系统调用，注册一个中断处理函数，看看执行起来是什么样子的 $^{[3]}$ ✅ 

6️⃣经过第5️⃣阶段的学习，可以系统学习某些大功能模块的机理了，比如虚拟内存、CFS调度算法、PageCache管理，某个文件系统(比如ext2)，网络协议栈等。❌

7️⃣学会使用kernel的调试工具，比如Qemu+gdb调用内核，还有内核自身提供的 ftrace, perf 等功能都是很好的测量和分析工具 ✅ 

------

$[1]$ 本文章的例子都在Debian12（6.1内核）上编译验证通过

$[2]$ 这本书的优点是随书提供了基于 2.6.10 内核的 [example code](https://github.com/vigoals/ldd)，当你在较新的内核上（比如6.1）编译它会遇到很多错误，解决这些错误也是一个学习Linux内核变化的很好途径。要善用ChatGPT

$[3]$ 这一过程遇到不懂的方向尽情扩展，包括但不限于并发控制、时间管理，以看懂源码为宜。这个学习过程对后面第6️⃣部分学习会有很大帮助

# 实践出真知

-   [01 内核编译](./docs/01-内核编译.md) 
-   [02 根文件系统](./docs/02-根文件系统.md) 
-   [03 内核调试](./docs/03-内核调试.md) 
-   [04 设备驱动](./docs/04-设备驱动.md) 
-   [05 中断处理](./docs/05-中断处理.md) 
-   [06 系统调用](./docs/06-系统调用.md) 
-   [07 进程管理](./docs/07-进程管理.md) 
-   [08 内存管理](./docs/08-内存管理.md) 
-   [09 文件系统](./docs/09-文件系统.md) 
-   [10 网络](./docs/10-网络.md) 
-   [11 时间管理](./docs/11-时间管理.md) 
-   [12 系统启动](./docs/12-系统启动.md) 
-   [13 Misc](./docs/13-Misc.md) 
-   [14 Reference](./docs/14-Reference.md) 

